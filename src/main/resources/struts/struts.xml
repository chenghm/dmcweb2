<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
	<!-- 加载struts文件 -->
	<include file="struts-default.xml"></include>
	<include file="struts-plugin.xml"></include>
	<constant name="struts.objectFactory" value="spring" />
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<constant name="struts.devMode" value="false" />
	<!-- 加i18n配置文件 -->
	<constant name="struts.custom.i18n.resources" value="i18n.messages" />

	<package name="dmc" extends="json-default" namespace="/">
	    <interceptors>
    <interceptor name="sessionInterceptor" class="com.cinsec.dmc.base.interceptor.SessionInterceptor" />
	</interceptors>
	    <default-interceptor-ref name="sessionInterceptor" />
		<global-results>
			<result name="accessDeniedException">/errors/403.jsp</result>
			<result name="json" type="json">
				<param name="root">dataMap</param>
			</result>
		</global-results>
		<global-exception-mappings>
			<exception-mapping result="accessDeniedException"
				exception="org.springframework.security.access.AccessDeniedException"
				name="accessDeniedException" />
		</global-exception-mappings>
	
		<action name="userMgtAction" class="userMgtAction">
			<interceptor-ref name="jsonValidationWorkflowStack" />
			<interceptor-ref name="sessionInterceptor" />
			<result name="findSuccess">/user/userMgt.jsp</result>
			<!-- <result name="initAddSuccess"> /user/userAdd.jsp</result> <result 
				name="addSuccess" type="json"> <param name="ignoreHierarchy">false</param> 
				<param name="includeProperties">actionErrors\[\d+\], fieldErrors\..+$, actionMessages\[\d+\]</param> 
				</result> -->
			<!-- <result name="input" type="json"> <param name="ignoreHierarchy">false</param> 
				<param name="includeProperties">actionErrors\[\d+\], fieldErrors\..+$, actionMessages\[\d+\]</param> 
				</result> <result name="json" type="json"> <param name="root">dataMap</param> 
				</result> <param name="ignoreHierarchy">false</param> <param name="includeProperties">actionStatus,actionErrors\[\d+\], 
				fieldErrors\..+$, actionMessages\[\d+\]</param> </result> -->
			<result name="deleteSuccess" type="redirect">/userMgtAction!findAll
			</result>
			<!-- <result name="modifySuccess" type="json"> <param name="ignoreHierarchy">false</param> 
				<param name="includeProperties">actionErrors\[\d+\], fieldErrors\..+$, actionMessages\[\d+\]</param> 
				</result> -->
			<!-- <result name="initModifySuccess" type="json"> <param name="ignoreHierarchy">false</param> 
				<param name="includeProperties">user,actionErrors\[\d+\], fieldErrors\..+$, 
				actionMessages\[\d+\]</param> </result> -->

			<result name="initModify" type="json">
				<param name="ignoreHierarchy">false</param>
				<param name="includeProperties">user\[\d+\]</param>
			</result>
		</action>
	</package>
</struts>    
